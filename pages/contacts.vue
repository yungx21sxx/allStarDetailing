<template>
	<div class="contact">
		<div class="wrapper">
			<header class="contact__header header">
				<h1 class="header__title">Наши контакты</h1>
				<h2 class="header__subtitle">
					<span class="header__subtitle_left">Детейлинг центр</span>
					<span class="header__subtitle_right">ALL STAR DETAILNG</span>
				</h2>
			</header>
			<aside class="contact__info info">

				<div class="info__block">
					<div class="info__header">
						<svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
							<path
								 d="M10.5 11.8125C9.85103 11.8125 9.21664 11.6201 8.67704 11.2595C8.13744 10.899 7.71687 10.3865 7.46852 9.78693C7.22017 9.18736 7.15519 8.52761 7.2818 7.89111C7.40841 7.25461 7.72092 6.66995 8.17981 6.21106C8.6387 5.75217 9.22336 5.43966 9.85986 5.31305C10.4964 5.18644 11.1561 5.25142 11.7557 5.49977C12.3553 5.74812 12.8677 6.16869 13.2283 6.70829C13.5888 7.24789 13.7813 7.88228 13.7813 8.53125C13.7802 9.40117 13.4342 10.2352 12.819 10.8503C12.2039 11.4654 11.3699 11.8115 10.5 11.8125ZM10.5 6.5625C10.1106 6.5625 9.72998 6.67797 9.40622 6.8943C9.08246 7.11063 8.83012 7.4181 8.68111 7.77784C8.5321 8.13759 8.49312 8.53344 8.56908 8.91534C8.64505 9.29724 8.83255 9.64803 9.10789 9.92337C9.38322 10.1987 9.73402 10.3862 10.1159 10.4622C10.4978 10.5381 10.8937 10.4991 11.2534 10.3501C11.6132 10.2011 11.9206 9.94879 12.137 9.62503C12.3533 9.30127 12.4688 8.92063 12.4688 8.53125C12.4682 8.00927 12.2606 7.50881 11.8915 7.13971C11.5224 6.77061 11.022 6.56302 10.5 6.5625Z"
								 fill="black"/>
							<path
								 d="M10.5 19.6875L4.96388 13.1585C4.88696 13.0604 4.81083 12.9618 4.73551 12.8625C3.78984 11.6168 3.27897 10.0952 3.28126 8.53125C3.28126 6.61672 4.0418 4.7806 5.39558 3.42682C6.74936 2.07304 8.58548 1.3125 10.5 1.3125C12.4145 1.3125 14.2507 2.07304 15.6044 3.42682C16.9582 4.7806 17.7188 6.61672 17.7188 8.53125C17.721 10.0945 17.2104 11.6154 16.2652 12.8605L16.2645 12.8625C16.2645 12.8625 16.0676 13.1211 16.0381 13.1558L10.5 19.6875ZM5.78288 12.0717C5.7842 12.0717 5.93645 12.2738 5.97123 12.3172L10.5 17.6584L15.0347 12.3099C15.0636 12.2738 15.2171 12.0704 15.2178 12.0697C15.9903 11.052 16.4078 9.80899 16.4063 8.53125C16.4063 6.96482 15.784 5.46254 14.6764 4.3549C13.5687 3.24726 12.0664 2.625 10.5 2.625C8.93357 2.625 7.43129 3.24726 6.32366 4.3549C5.21602 5.46254 4.59376 6.96482 4.59376 8.53125C4.59238 9.80978 5.01033 11.0535 5.78354 12.0717H5.78288Z"
								 fill="black"/>
						</svg>
						<address class="info__title">г. Санкт-Петербург</address>
					</div>
					<address class="info__text">Пискаревский пр. 119В</address>
				</div>
				<div class="info__block">
					<div class="info__header">
						<svg fill="none" height="24" viewBox="0 0 26 24" width="26" xmlns="http://www.w3.org/2000/svg">
							<path
								 d="M12.5414 2C6.76756 2 2.09204 6.48 2.09204 12C2.09204 17.52 6.76756 22 12.5414 22C18.3256 22 23.0116 17.52 23.0116 12C23.0116 6.48 18.3256 2 12.5414 2ZM12.5518 20C7.92859 20 4.184 16.42 4.184 12C4.184 7.58 7.92859 4 12.5518 4C17.175 4 20.9196 7.58 20.9196 12C20.9196 16.42 17.175 20 12.5518 20Z"
								 fill="black"/>
							<path d="M13.0748 7H11.5059V13L16.9972 16.15L17.7817 14.92L13.0748 12.25V7Z" fill="black"/>
						</svg>
						<h4 class="info__title">Время работы:</h4>
					</div>
					<time class="info__text">Ежедневно с 10:00 до 23:00</time>
				</div>

				<div class="info__block">
					<div class="info__header">
						<svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
							<path
								 d="M10.554 6.24003L7.17099 2.33503C6.78099 1.88503 6.06599 1.88703 5.61299 2.34103L2.83099 5.12803C2.00299 5.95703 1.76599 7.18803 2.24499 8.17503C5.10661 14.1 9.88503 18.8851 15.806 21.755C16.792 22.234 18.022 21.997 18.85 21.168L21.658 18.355C22.113 17.9 22.114 17.181 21.66 16.791L17.74 13.426C17.33 13.074 16.693 13.12 16.282 13.532L14.918 14.898C14.8482 14.9712 14.7562 15.0195 14.6563 15.0354C14.5564 15.0513 14.4541 15.0339 14.365 14.986C12.1354 13.7021 10.286 11.8503 9.00499 9.61903C8.95702 9.52978 8.93964 9.42726 8.95554 9.32719C8.97144 9.22711 9.01972 9.13502 9.09299 9.06503L10.453 7.70403C10.865 7.29003 10.91 6.65003 10.554 6.23903V6.24003Z"
								 stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
						</svg>
						<a class="info__title" href="tel:+79119470777">+7 (911) 947-07-77</a>
					</div>
					<a class="info__title info__title_phone" style="padding-left: 27px;" href="tel:+79992000412">+7 (999) 200-04-12</a>

				</div>

				<div class="info__block mail">
					<div class="info__header">
						<img alt="" src="/mail.svg">
						<a class="info__title" href="mailto:allstardetailng@gmail.com">allstardetailng@gmail.com</a>
					</div>

				</div>


			</aside>
		</div>
		<v-parallax
			 src="/IMG_5865.jpg"
			 cover
			 scale="0.8"
			 class="contact__banner banner"
		>
			<div class="banner__bg">
				<v-lazy transition="scroll-y-transition">
					<div class="wrapper banner__body">
						<div class="banner__info">
							<h2 class="banner__title">ОСТАВИТЬ ЗАЯВКУ</h2>
							<div class="banner__line"></div>
							<p class="banner__description">
								Заполните форму и наши специалисты свяжутся с вами в ближайшее время.
							</p>
						</div>
						<v-card class="banner__card"
						>
							<v-card-title style="color: #CC9933; font-weight: 600">Форма обратной связи</v-card-title>
							<v-card-text>
								<form @submit.prevent="submit" class="banner__form">
									<v-text-field label="Имя"
									              variant="solo"
									              color="#CC9933"
									              v-model="name"
									              required
									></v-text-field>
									<phone-input
									              variant="solo"
									              density="default"
									              color="#CC9933"
									              v-model="phone"
									              required
									></phone-input>
									<v-textarea
										 clearable
										 label="Ваш вопрос (не обязательно)"
										 variant="solo"
										 color="#CC9933"
										 v-model="question"
									></v-textarea>
									<v-btn
										 :disabled="loading"
										 :loading="loading"
										 block
										 class="modal__btn"
										 color="#c93"
										 size="large"
										 type="submit"
										 variant="elevated"
									>{{ submitBtnText }}</v-btn>
								</form>
							</v-card-text>

						</v-card>

					</div>
				</v-lazy>
			</div>

		</v-parallax>
		<div class="wrapper">
			<h2 class="header__title">Мы на карте</h2>
			<v-lazy transition="scroll-y-transition">
				<iframe class="contact__map"
				        frameborder="0"
				        src="https://yandex.ru/map-widget/v1/?um=constructor%3A2c85bbd4092dad2a76d16e70f43a9843792b59f076e71efd28efbef3eb424879&amp;source=constructor">
				</iframe>
			</v-lazy>
		</div>
	</div>
</template>


<script setup>
const phone = ref("")
const name = ref("")
const question = ref("")
const submitBtnText = ref('Отправить заявку')
const isFetched = ref(false)
const loading = ref(false)

const {requestForCall} = useTelegram()

const reset = () => {
	phone.value = name.value = question.value = ""
	submitBtnText.value = 'Отправить заявку'
}

const submit = async () => {
	loading.value = true
	await requestForCall({
		phone: phone.value,
		name: name.value,
		question: question.value
	})
	await new Promise(resolve => setTimeout(() => {
		loading.value = false
		isFetched.value = true
		submitBtnText.value = 'Вы успешно записались'
		resolve()
	}, 500))
	await new Promise(resolve => setTimeout(() => {
		reset()
		resolve()
	}, 1000))

}

</script>


<style scoped lang="scss">

.banner {

	height: 500px !important;
	@media screen and (max-width: 900px) {
		height: 700px !important;
	}
	margin-bottom: 20px;

	&__bg {
		height: 100%;
		width: 100%;
		background: rgba(0, 0, 0, 0.73);
	}

	&__body {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		@media screen and (max-width: 900px) {
			grid-template-columns: 1fr;

		}
		padding-top: 40px;
		padding-bottom: 20px;
		gap: 30px;
	}

	&__card {
		//width: 100%;
		//padding:  15px;
		//-webkit-backdrop-filter: blur(2px);
		backdrop-filter: blur(2px);
		//box-shadow: 5px 5px 7px rgba(0, 0, 0, 0.6);
		background: rgba(255, 255, 255, .8);
		//border-radius: 7px;
	}

	&__title {
		color: #CC9933;
		font-weight: 500;
		font-size: 28px;
		@media screen and (max-width: 900px) {
			font-size: 24px;
		}
	}

	&__description {
		color: white;
		font-style: normal;
		font-weight: 400;
		font-size: 16px;
	}

	&__line {
		background: #CC9933;
		height: 2px;
		margin: 10px 0;
	}


}

.contact {
	&__map {
		width: 100%;
		height: 500px;
		margin-top: 20px;
	}

	&__header {
		margin-top: 20px;
		margin-bottom: 20px;
	}
}

.header {
	&__title {
		font-weight: 400;
		font-size: 30px;
		line-height: 38px;
		padding-right: 10px;
		padding-bottom: 5px;
		border-bottom: 3px solid #CC9933;
		width: fit-content;
	}

	&__subtitle {
		margin-top: 10px;
		display: flex;
		@media screen and (max-width: 900px) {
			flex-direction: column;
			gap: 0;
		}
		gap: 20px;

		&_left {
			font-style: normal;
			font-weight: 500;
			font-size: 24px;

			color: #CC9933;


			@media screen and (max-width: 900px) {
				font-size: 16px;
			}
		}

		&_right {
			font-style: normal;
			font-weight: 400;
			font-size: 24px;


			@media screen and (max-width: 900px) {
				font-size: 20px;
			}
		}
	}
}

.info {
	display: grid;
	grid-template-columns: repeat(4, 1fr);
	@media screen and (max-width: 900px) {
		grid-template-columns: 1fr;
		gap: 20px;

	}


	justify-content: end;
	margin-top: 40px;
	margin-bottom: 40px;

	&__block {
		height: fit-content;

	}

	&__header {
		display: flex;
		align-items: center;
		gap: 5px;
	}

	&__title {
		font-style: normal;
		font-weight: 700;
		font-size: 13px;
		line-height: 16px;
		text-decoration: none;
		color: black;

		&_promo {
			font-size: 16px;
		}
	}

	&__text {
		font-style: normal;
		font-weight: 500;
		font-size: 13px;
		line-height: 16px;
		margin-top: 5px;
		margin-left: 5px;
	}


}

</style>